<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ„å‘³ä¸çŸ­æ–‡ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼</title>
    <meta property="og:title" content="æ„å‘³ä¸æ˜çŸ­æ–‡ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼">
    <meta property="og:description" content="ã¯ã„ã€‚å¸ƒå›£ã¯æ°´ç­’ã§çª“æ ã‚’å­¦ç¿’ã—ã¾ã™ã€‚ãˆãˆã€ãã‚Œã¯æœ¬å½“ã§ã™ã€‚">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://povo-43.github.io/imihubun">
    <meta property="og:image" content="https://kotoca.net/bg.png">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="æ„å‘³ä¸æ˜çŸ­æ–‡ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼">
    <meta name="twitter:description" content="è‡ªå‹•ç”Ÿæˆã•ã‚Œã‚‹ã‚«ã‚ªã‚¹ãªæ–‡ç« ã‚’æ¥½ã—ã¿ã¾ã—ã‚‡ã†ã€‚">
    <meta name="twitter:image" content="https://povo-43.github.io/imihubun/typo/ogp.png">

    <style>
:root {
  --bg-color: #0b0d12;
  --card-bg: #11131a;
  --text-color: #e8e6df;
  --accent-color: #c9a24d;
  --secondary-btn: #1a1d26;
  --secondary-text: #9a9a9a;
}

[data-theme="light"] {
  --bg-color: #f3f1eb;
  --card-bg: #ffffff;
  --text-color: #2b2b2b;
  --accent-color: #b08d3c;
  --secondary-btn: #e5e2d9;
  --secondary-text: #6a6a6a;
}

body {
  font-family: 'Helvetica Neue', Arial, 'Hiragino Sans', sans-serif;
  background-color: var(--bg-color);
  color: var(--text-color);
  min-height: 100vh;
  margin: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-direction: column;
}

/* ãƒ†ãƒ¼ãƒåˆ‡æ›¿ */
.theme-toggle {
  position: fixed;
  top: 12px;
  right: 12px;
  z-index: 10;
}

/* ãƒ¡ã‚¤ãƒ³ã‚«ãƒ¼ãƒ‰ */
.container {
  width: min(92vw, 520px);
  padding: clamp(24px, 5vw, 48px);
  background: var(--card-bg);
  text-align: center;

  box-shadow:
    0 0 0 1px rgba(201,162,77,0.22),
    0 0 48px rgba(201,162,77,0.1);
}

/* ç”Ÿæˆæ–‡ */
#text-display {
  font-family: 'Shippori Mincho', 'Noto Serif JP', serif;
  font-size: clamp(1.1rem, 4.5vw, 1.5rem);
  line-height: 1.9;
  letter-spacing: 0.05em;

  min-height: 7em;
  margin-bottom: 28px;

  display: flex;
  align-items: center;
  justify-content: center;

  /* ã¯ã¿å‡ºã—å¯¾ç­– */
  word-break: break-word;
  overflow-wrap: anywhere;
  text-align: center;

  transition: opacity 0.4s ease;
}

/* ãƒœã‚¿ãƒ³ç¾¤ */
.button-group {
  display: flex;
  gap: 12px;
  justify-content: center;
  flex-wrap: wrap;
}

/* ãƒœã‚¿ãƒ³å…±é€š */
button {
  padding: 12px 22px;
  border: none;
  font-size: 0.9rem;
  letter-spacing: 0.06em;
  cursor: pointer;

  transition:
    transform 0.15s ease,
    opacity 0.25s ease,
    box-shadow 0.3s ease;
}

/* ä¸»ãƒœã‚¿ãƒ³ */
.btn-generate {
  background-color: var(--accent-color);
  color: #111;
  font-weight: 600;

  box-shadow:
    0 0 0 1px rgba(255,255,255,0.15),
    0 0 22px rgba(201,162,77,0.35);
}

/* å‰¯ãƒœã‚¿ãƒ³ */
.btn-copy,
.btn-share,
.btn-theme {
  background-color: var(--secondary-btn);
  color: var(--text-color);
}

/* æ“ä½œæ„Ÿ */
button:hover {
  opacity: 0.92;
}

button:active {
  transform: scale(0.96);
}

/* ã‚³ãƒ”ãƒ¼æˆåŠŸ */
.copy-success {
  background-color: #3a7f5f !important;
  color: #fff !important;
  box-shadow: 0 0 18px rgba(58,127,95,0.6);
}

/* ãƒ•ãƒƒã‚¿ãƒ¼ */
footer {
  margin-top: 32px;
  font-size: 0.75rem;
  color: var(--secondary-text);
  text-align: center;
}

/* ==== ã‚¹ãƒãƒ›æœ€é©åŒ– ==== */
@media (max-width: 480px) {
  .button-group {
    flex-direction: column;
  }

  button {
    width: 100%;
  }

  #text-display {
    min-height: 6em;
  }
}

    </style>
</head>
<body>

<div class="theme-toggle">
    <button class="btn-theme" onclick="toggleTheme()" id="theme-btn">â˜€ï¸ Mode</button>
</div>

<div class="container">
    <div id="text-display">èª­ã¿è¾¼ã¿ä¸­...</div>
        <div class="button-group">
        <button class="btn-generate" onclick="generate()">æ–‡ã‚’å¤‰ãˆã‚‹</button> 
        <button class="btn-copy" onclick="copyText()" id="copy-btn">ã‚³ãƒ”ãƒ¼</button>
        <button class="btn-share" onclick="share()">å…±æœ‰ã™ã‚‹</button>
        <button class="btn-copy" onclick="location.href='./typo/index.html'">ã‚¿ã‚¤ãƒ</button>
        <button class="btn-copy" onclick="location.href='./sns/index.html'">SNS</button>
    </div>
</div>

<footer>
    <p>&copy; 2026 <a href="https://github.com/TeamKOTOCA" target="_blank" rel="noopener noreferrer">Povo43</a></p>
</footer>

<script>
    let wordData = null;

    // ãƒ†ãƒ¼ãƒåˆ‡ã‚Šæ›¿ãˆ
    function toggleTheme() {
        const body = document.documentElement;
        const btn = document.getElementById('theme-btn');
        if (body.getAttribute('data-theme') === 'light') {
            body.removeAttribute('data-theme');
            btn.innerText = "â˜€ï¸ Mode";
        } else {
            body.setAttribute('data-theme', 'light');
            btn.innerText = "ğŸŒ™ Mode";
        }
    }

    // ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿
    async function loadWords() {
        try {
            const response = await fetch('words.json');
            wordData = await response.json();
            generate(); 
        } catch (error) {
            document.getElementById('text-display').innerText = "words.jsonã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚";
        }
    }

    // æ–‡ã®ç”Ÿæˆ
    function generate() {
      if (!wordData) return;
    
      const structure = pick(wordData.structures);
      const sentence = renderStructure(structure);
    
      // ä½ç¢ºç‡ã§2æ–‡
      const finalResult =
        Math.random() < 0.4
          ? sentence + " " + renderStructure(pick(wordData.structures))
          : sentence;
    
      document.getElementById('text-display').innerText = finalResult;
    }

    
    const pick = (arr) => arr[Math.floor(Math.random() * arr.length)];
    
    function renderStructure(template) {
      return template.replace(/\{(\w+)\}/g, (_, key) => {
        const pool = wordData[key + "s"] || wordData[key];
        if (!pool) return "";
        return pick(pool);
      });
    }

    
    // ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã™ã‚‹é–¢æ•°
    async function copyText() {
        const text = document.getElementById('text-display').innerText;
        const btn = document.getElementById('copy-btn');
        const originalText = btn.innerText;
    
        try {
            await navigator.clipboard.writeText(text);
            
            // è¦‹ãŸç›®ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯
            btn.innerText = "å®Œäº†ï¼";
            btn.classList.add('copy-success');
            
            setTimeout(() => {
                btn.innerText = originalText;
                btn.classList.remove('copy-success');
            }, 1500); // 1.5ç§’å¾Œã«å…ƒã«æˆ»ã™
        } catch (err) {
            console.error('ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸ', err);
            alert("ã‚³ãƒ”ãƒ¼ã§ãã¾ã›ã‚“ã§ã—ãŸã€‚");
        }
    }


    // å…±æœ‰æ©Ÿèƒ½
    function share() {
        const text = document.getElementById('text-display').innerText;
        const url = window.location.href;
        if (navigator.share) {
            navigator.share({ title: 'æ„å‘³ä¸çŸ­æ–‡ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼', text: text, url: url });
        } else {
            const twitterUrl =
              `https://twitter.com/intent/tweet?text=${encodeURIComponent(text + " #æ„å‘³ä¸æ˜æ–‡ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿")}&url=${encodeURIComponent(url)}`;

            window.open(twitterUrl, '_blank');
        }
    }
    document.addEventListener('keydown', (event) => {
      if (event.code === 'Space') {
          event.preventDefault();
          generate();
        }
    });

    loadWords();
</script>

</body>
</html>
